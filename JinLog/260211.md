# 260211 작업 기록

## 1. hive TUI가 제대로 실행되지 않은 이유 (GOOGLE_API_KEY 설정 누락)

### 증상
- `tech_news_reporter-graph` 실행 직후 `intake` 노드에서 즉시 실패
- 핵심 에러:
  - `Node 'Intake' failed after 0 attempts: LLM provider not available`
  - `LLM provider is required for EventLoopNode`
- 로그에 `CEREBRAS_API_KEY not found` 경고도 있었지만, 이건 출력 정리(cleaning) 관련 경고라 치명 원인은 아니었음

### 실제 원인
- 모델 설정은 Gemini 계열이었는데, 런타임 코드 경로가 `GOOGLE_API_KEY`를 기준으로 LLM provider 초기화를 판단
- 초기에 `GEMINI_API_KEY`만 설정했고, `GOOGLE_API_KEY`가 비어 있어서 provider가 생성되지 못함
- 결과적으로 `EventLoopNode`에서 `ctx.llm is None` 가드에 걸려 0회 재시도 상태로 바로 실패

### 확인 과정
- 환경 변수 확인 시점에 `HIVE_CREDENTIAL_KEY`만 잡혀 있고 LLM API 키는 비어 있었음
- `~/.hive/configuration.json`에는 Gemini 모델이 설정돼 있었음
- 코드 확인 시 Gemini/Google 계열 모델에서 `GOOGLE_API_KEY`를 찾는 로직이 존재함

### 해결
- 아래처럼 두 변수 모두 설정 후 재실행:
  - `export GOOGLE_API_KEY="..."`
  - `export GEMINI_API_KEY="$GOOGLE_API_KEY"`
- 실패 세션 `/resume` 대신 새 실행으로 시작해 정상 동작 확인

### 재발 방지
- 실행 전 빠른 체크:
  - `echo ${GOOGLE_API_KEY:+set}`
  - `echo ${GEMINI_API_KEY:+set}`
- TUI 시작 전에 동일 터미널 세션에서 키를 먼저 export
- 가능하면 shell profile(`~/.zshrc`)에 고정 설정

---

## 2. `AI news today` 실행 후기

### 입력
- Chat REPL 입력: `AI news today`

### 동작 관찰
- 그래프 흐름은 `intake -> research -> compile-report` 순서로 정상 진행
- `research` 노드에서 `web_search`, `web_scrape`를 다건 호출
- 일부 URL은 `HTTP 404: Failed to fetch URL` 발생
  - 뉴스 링크 만료/리다이렉트/접근 제한으로 보이며, 전체 실패는 아니고 개별 링크 실패로 처리됨
- 전체 체감 속도는 느린 편
  - 이유: 다수 기사 수집 + 스크래핑 + 요약 + 리포트 조합 단계가 연속으로 수행되기 때문

### 산출물
- HTML 리포트 생성 성공
- 기존 기본 저장 경로가 홈 디렉토리(`~/.hive/...`)여서 처음엔 위치를 찾기 어려웠음
- 이후 저장 경로를 프로젝트 내부로 변경:
  - `hive/JinLog/tech_news_reporter`
- 앞으로 생성되는 세션/리포트는 프로젝트 폴더 안에서 관리 가능

### 결과물 품질 메모
- 레이아웃/가독성은 생각보다 좋았음 (카테고리/기사 카드 구조)
- 다만 날짜 표기가 과거 날짜로 들어갈 수 있어 실행 프롬프트에서 날짜 기준을 명시하는 게 안전
  - 예: `Use today's date (2026-02-11)`

### 다음 실행 시 개선안
- 속도 우선 프롬프트로 기사 수 제한:
  - `max 4 articles`, `1 sentence summary`, `skip failed URLs`
- 소스 제한(예: Reuters/The Verge)으로 스크래핑 실패율과 처리 시간 축소
